import{NextResponse as e, type NextRequest}from"next/server";export function middleware(t:NextRequest){let i=t.headers.get("user-agent")||"",r=/bot|crawl|slurp|spider|mediapartners/i.test(i);if(r)return e.next();let o=/(iPad|Tablet)/i.test(i)||/(Android)/i.test(i)&&!/Mobile/i.test(i),n=!o&&/Mobi|Android|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(i);if(!n){let s=`https://desktop.peur-de-la-conduite.fr${t.nextUrl.pathname}${t.nextUrl.search}`,a=e.redirect(s);return a.cookies.set("deviceType","desktop",{path:"/",domain:".peur-de-la-conduite.fr",httpOnly:!0,secure:!0,sameSite:"strict"}),a}let d=e.next();return d.cookies.set("deviceType","mobile",{path:"/",domain:".peur-de-la-conduite.fr",httpOnly:!0,secure:!0,sameSite:"strict"}),d}export const config={matcher:["/","/((?!_next|api|robots.txt|sitemap.xml|favicon.ico).*)"]};